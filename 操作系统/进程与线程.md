# 进程与线程

## 进程
进程是程序的一次执行过程，是一个动态概念，是程序在执行过程中分配和管理资源的基本单位，每个进程都有自己的地址空间。

## 线程
线程是CPU调度和分配的基本单位，它与同属进程的其他线程共享进程所拥有的全部资源。

## 联系
线程是进程的一部分，一个线程只能属于一个进程，一个进程可以由多个线程。

## 区别
* 根本区别:进程是资源分配基本单位，线程是任务调度和执行基本单位。
* 开销方面：每个进程都有自己独立的代码和数据空间(上下文)；线程可以看成轻量级进程，每个线程也有自己的运行栈和程序计数器，线程切换开销小。
* 所处环境：在操作系统中能运行多个进程；同一个进程内运行多个线程同时执行(每个时间片只有一个线程执行)。
## 线程设计的好处

并发为了让硬件利用率高，线程是为了在系统层做到并发(CPU时间分片)，线程上下文切换效率高。

## 进程间通信
[参考](https://blog.csdn.net/wujiafei_njgcxy/article/details/77098977)  
进程间通信IPC(Inter-Process Communication),指多个进程之间相互通信，交换信息。根据信息量大小可分为两大类：  
(1)低级通信，控制信息的通信(主要用于进程之间的同步、互斥、终止和挂起)  
(2)高级通信，大批数据的通信(进程间数据块的交换与共享，常见的高级通信有消息队列、共享内存)
* <strong>管道</strong>：一种半双工通信方式，数据只能单向流动，无名管道：只能有亲缘关系的父子进程间使用，通常父进程创建管道，由通信的子进程继承父进程的读端点句柄或者父进程有读写句柄的子进程，这些子进程可以直接使用管道通信；<strong>命名管道可以无亲缘关系之间使用，建立在实际的磁盘介质或文件系统，任何进程可以通过文件名或路径建立该文件的连接关系FIFO。常见的Linux命令 "|" 其实就是匿名管道，表示把一个进程的输出传输到另外一个进程：</strong>
```shell
echo "Happyjava" | awk -F 'j' '{print $2}'
# 输出 ava
```
* <strong>信号量</strong>：信号量本质就是一个计数器，用来实现进程间的互斥与同步，例如：信号量初始1，A进程访问内存1，我们将信号量设为0，B进程要访问内存1，看到信号量0则知道有进程再访问，B就不会访问内存1.
* <strong>消息队列</strong>：是消息的链表,存放在内核中并由消息队列标识符标识，克服了信号量传递信息少，管道只能承载无格式字节流以及缓冲区大小受限等特点。优点:可以实现任意进程间通信，并通过系统调用来实现发送和接收之间的同步；缺点：信息的复制需要额外消耗CPU的时间，不适宜于信息量大或操作频繁的场合。
* <strong>共享内存</strong>：共享内存就是映射一段其他进程所访问的内存，这段内存由一个进程创建，多个进程访问；也就是各自拿出一块虚拟地址空间，映射到相同的物理内存中；共享内存是最快的IPC方式，往往配合信号量使用，实现进程间的同步与通信。优点：无需复制、快捷、信息量大；缺点：通信是将共享空间缓冲区附加到虚拟机地址空间中来实现的；进程间的读写操作存在同步问题。
* <strong>套接字</strong>：用于不同机器之间的进程通信；优点：传输数据为字节级，可自定义传输数据；传输时间短，性能高；适合于客户端与服务端之间信息实时交互；数据可加密。缺点：需对传输的数据进行解析，转化成应用级的数据。
  
